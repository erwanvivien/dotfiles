#!/bin/sh
RED='\033[0;31m'
NC='\033[0m' # No Color

red() {
    if [ -z $1 ]; then
        return;
    fi
    echo -e "\n\n${RED}$1:$NC"
}

inst() {
    if [ -z $1 ]; then
        return;
    fi
    red $1
    sudo apt install -y $1
}

read -p "Copy VIMRC ?     [Enter/y/n/yes/no]: " check
if [ "$check" = "y" ] || [ "$check" = "" ] || [ "$check" = "yes" ]; then
    cp .vimrc ~/;
fi

read -p "Copy BASHRC ?    [Enter/y/n/yes/no]: " check
if [ "$check" = "y" ] || [ "$check" = "" ] || [ "$check" = "yes" ]; then
    cp .bashrc ~/;

    read -p "Copy DIRCOLORS ? [Enter/y/n/yes/no]: " check
    if [ "$check" = "y" ] || [ "$check" = "" ] || [ "$check" = "yes" ]; then
        cp .dircolors ~/;
    fi

    source ~/.bashrc
fi



read -p 'login epita: ' LOGIN
source ~/.bashrc

red "Update du apt-get && upgrade"
sudo apt-get update -y && sudo apt-get upgrade -y

inst git

red "update git config --global user.email"
git config --global user.email "$LOGIN@epita.fr"
red "update git config --global \"$LOGIN\""
git config --global user.name "$LOGIN"

inst vim
inst cmake
inst clang
inst clang-format
inst tree
inst gcc
inst g++
inst make
inst cargo
inst valgrind
inst npm

red "SSH-keygen"
if [[ -d "~/.ssh/" ]]; then
    red "You already have one"
else
    ssh-keygen -t rsa -b 4096 -f "$HOME/.ssh/id_rsa"
fi

echo -e '\n\n'
red "Your SSH-key is in the clipboard, \npaste it at cri.epita.fr/users/$LOGIN/ssh-keys"
cat .ssh/id_rsa.pub | clip.exe
